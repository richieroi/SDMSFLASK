{% extends "base.html" %}

{% block title %}{{ announcement.Title }} - School Management System{% endblock %}

{% block content %}
<div class="announcement-detail">
    <div class="announcement-header">
        <h1><i class="fas fa-bullhorn"></i> {{ announcement.Title }}</h1>
        <div class="announcement-meta">
            <span><i class="fas fa-user"></i> Posted by: {{ announcement.CreatedByUser }}</span>
            <span><i class="fas fa-clock"></i> {{ announcement.PublishDate.strftime('%B %d, %Y at %H:%M') }}</span>
            {% if announcement.CourseCode %}
            <span><i class="fas fa-book"></i> Course: {{ announcement.CourseCode }} ({{ announcement.CourseName }})</span>
            {% else %}
            <span><i class="fas fa-globe"></i> General Announcement</span>
            {% endif %}
            {% if announcement.ExpiryDate %}
            <span><i class="fas fa-calendar-times"></i> Expires: {{ announcement.ExpiryDate.strftime('%B %d, %Y') }}</span>
            {% endif %}
        </div>
    </div>
    
    <div class="announcement-content">
        {{ announcement.Content | safe }}
    </div>
    
    <div class="announcement-actions">
        <a href="{{ url_for('announcements.announcements_home') }}" class="btn"><i class="fas fa-arrow-left"></i> Back to Announcements</a>
        
        {% if session.user_id == announcement.CreatedBy or session.user_role == 'Admin' %}
        <a href="{{ url_for('announcements.edit_announcement', announcement_id=announcement.AnnouncementID) }}" class="btn btn-primary"><i class="fas fa-edit"></i> Edit</a>
        
        <form method="POST" action="{{ url_for('announcements.delete_announcement', announcement_id=announcement.AnnouncementID) }}" class="inline-form" onsubmit="return confirm('Are you sure you want to delete this announcement? This action cannot be undone.');">
            <button type="submit" class="btn btn-danger"><i class="fas fa-trash"></i> Delete</button>
        </form>
        {% endif %}
    </div>
</div>

<style>
    .announcement-detail {
        background-color: white;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        margin-bottom: 30px;
        overflow: hidden;
    }
    
    .announcement-header {
        background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
        color: white;
        padding: 30px;
    }
    
    .announcement-header h1 {
        margin-top: 0;
        margin-bottom: 15px;
        color: white;
        border-bottom: none;
        font-size: 2rem;
    }
    
    .announcement-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        font-size: 0.95rem;
    }
    
    .announcement-meta span {
        display: flex;
        align-items: center;
        gap: 5px;
    }
    
    .announcement-content {
        padding: 30px;
        line-height: 1.7;
        font-size: 1.1rem;
        white-space: pre-line;
    }
    
    .announcement-actions {
        padding: 20px 30px;
        background-color: #f9f9fa;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }
</style>
{% endblock %}
